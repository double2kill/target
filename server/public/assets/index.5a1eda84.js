var ue=Object.defineProperty;var M=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var P=(u,t,e)=>t in u?ue(u,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[t]=e,R=(u,t)=>{for(var e in t||(t={}))te.call(t,e)&&P(u,e,t[e]);if(M)for(var e of M(t))ae.call(t,e)&&P(u,e,t[e]);return u};import{r as oe,a as f,b as p,w as ne,d as c,o as w,c as d,e as m,f as i,g as s,u as a,N as D,h as E,i as A,j as k,k as q,l as U,m as O,n as v,p as y,q as se,F as L,s as B,t as T,v as K,x as V,y as j,z as H,A as re,B as le,R as ie,C as z,D as de,E as ce,G as pe,H as G,I as _e,J as me,K as fe,L as ve,M as Be,O as Fe,P as ye}from"./vendor.fe1182e8.js";const he=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}};he();const J="api",C=`/${J}/targetList`,W=`/${J}/userList`,F=oe({\u7528\u6237\u540D:localStorage.getItem("\u7528\u6237\u540D")||""}),ge=async u=>{const{\u7528\u6237\u540D:t}=u;if((await f.get(W)).data.some(n=>n.\u7528\u6237\u540D===t)){F.\u7528\u6237\u540D=t,localStorage.setItem("\u7528\u6237\u540D",t);return}throw window.$message.error("\u767B\u5F55\u5931\u8D25\uFF0C\u7528\u6237\u4E0D\u5B58\u5728"),Error()},we=()=>{F.\u7528\u6237\u540D="",localStorage.removeItem("\u7528\u6237\u540D")},Q=p(!1),De=u=>{Q.value=u},N=p([]),h=async()=>{const{\u7528\u6237\u540D:u}=F;if(!u){N.value=[];return}const t=Q.value?{}:{\u7528\u6237\u540D:u},e=await f.get(C,{params:t});N.value=e.data},Ee=async u=>{await f.post(C,u),await h()},Ae=async u=>{await f.put(`${C}/${u.id}`,u),await h()},ke=async u=>{await f.delete(`${C}/${u.id}`),await h()},g=p(!1),Ce=()=>{$.value={\u76EE\u6807\u5185\u5BB9:"",\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4:"",\u7528\u6237\u540D:""},g.value=!0},$e=u=>{$.value=u,g.value=!0},I=p(null),xe=u=>{I.value=u},$=p({\u76EE\u6807\u5185\u5BB9:"",\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4:"",\u7528\u6237\u540D:""});ne(F,()=>{h()});const x=(u,t)=>{const{field:e}=u;return t?!0:new Error(`${e}\u5FC5\u586B`)},be=c({props:{initialFormData:{type:Object,required:!0}},setup(u){const t=p(null),e=p({\u76EE\u6807\u5185\u5BB9:"",\u7528\u6237\u540D:"",\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4:""}),l=o=>{if(o.id){Ae(o);return}Ee(o)};w(()=>{e.value=R({},$.value),xe(t.value)});const n={\u76EE\u6807\u5185\u5BB9:[{required:!0,validator:x,trigger:["input","blur"]}],\u7528\u6237\u540D:[{required:!0,validator:x,trigger:["input","blur"]}],\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4:[{required:!0,validator:x,trigger:["input","blur"]}]};return(o,r)=>(d(),m(a(q),{ref:(_,ee)=>{ee.formRef=_,t.value=_},model:e.value,rules:n,onSubmit:r[6]||(r[6]=_=>l(e.value))},{default:i(()=>[s(a(A),{path:"\u76EE\u6807\u5185\u5BB9",label:"\u76EE\u6807\u5185\u5BB9"},{default:i(()=>[s(a(D),{value:e.value.\u76EE\u6807\u5185\u5BB9,"onUpdate:value":r[0]||(r[0]=_=>e.value.\u76EE\u6807\u5185\u5BB9=_),"data-test-id":"\u76EE\u6807\u5185\u5BB9",placeholder:"\u8BF7\u8F93\u5165",onKeydown:r[1]||(r[1]=E(k(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),s(a(A),{path:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D"},{default:i(()=>[s(a(D),{value:e.value.\u7528\u6237\u540D,"onUpdate:value":r[2]||(r[2]=_=>e.value.\u7528\u6237\u540D=_),"data-test-id":"\u7528\u6237\u540D",placeholder:"\u8BF7\u8F93\u5165",onKeydown:r[3]||(r[3]=E(k(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),s(a(A),{path:"\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4",label:"\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4"},{default:i(()=>[s(a(D),{value:e.value.\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4,"onUpdate:value":r[4]||(r[4]=_=>e.value.\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4=_),"data-test-id":"\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4",placeholder:"\u8BF7\u8F93\u5165",onKeydown:r[5]||(r[5]=E(k(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["model"]))}}),Le=c({setup(u){const t=()=>new Promise((l,n)=>{I.value.validate(o=>{o?n():l(!0)})}),e=async()=>{await t(),await I.value.onSubmit()};return(l,n)=>(d(),m(a(O),{show:a(g),"onUpdate:show":n[0]||(n[0]=o=>U(g)?g.value=o:null),"mask-closable":!1,"show-icon":!1,preset:"dialog",title:"\u6DFB\u52A0\u76EE\u6807","positive-text":"\u786E\u8BA4","negative-text":"\u7B97\u4E86",onPositiveClick:e},{default:i(()=>[s(be,{"initial-form-data":a($)},null,8,["initial-form-data"])]),_:1},8,["show"]))}});const Ne=B(" \u7F16\u8F91 "),Ie=B(" \u5220\u9664 "),Se=B(" \u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F "),Me=c({props:{rowData:{type:Object,required:!0}},setup(u){return(t,e)=>(d(),v(L,null,[s(a(y),{class:"action-button","data-test-id":"\u7F16\u8F91",onClick:e[0]||(e[0]=l=>a($e)(u.rowData))},{default:i(()=>[Ne]),_:1}),s(a(se),{"show-icon":!1,"negative-text":"\u7B97\u4E86","positive-text":"\u786E\u5B9A",onPositiveClick:e[1]||(e[1]=l=>a(ke)(u.rowData))},{trigger:i(()=>[s(a(y),{class:"action-button",type:"error",size:"small","data-test-id":"\u5220\u9664"},{default:i(()=>[Ie]),_:1})]),default:i(()=>[Se]),_:1})],64))}});const Pe={key:0,class:"top-box"},Re=B(" \u6DFB\u52A0 "),X=c({props:{isAdminMode:Boolean},setup(u){const t=u;w(()=>{De(t.isAdminMode),h()});let e=[{title:"\u76EE\u6807\u5185\u5BB9",key:"\u76EE\u6807\u5185\u5BB9"},{title:"\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4",key:"\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4"},{title:"\u5B8C\u6210\u65F6\u95F4",key:"\u5B8C\u6210\u65F6\u95F4"}];return t.isAdminMode&&(e=e.concat([{title:"\u7528\u6237\u540D",key:"\u7528\u6237\u540D"},{title:"\u64CD\u4F5C",key:"\u64CD\u4F5C",width:180,render(l){return T(Me,{rowData:l})}}])),(l,n)=>(d(),v(L,null,[u.isAdminMode?(d(),v("div",Pe,[s(a(y),{"data-test-id":"\u6DFB\u52A0",onClick:a(Ce)},{default:i(()=>[Re]),_:1},8,["onClick"]),s(Le)])):K("",!0),s(a(V),{"data-test-id":"\u8868\u683C","row-key":o=>o.id,columns:a(e),data:a(N)},null,8,["row-key","columns","data"])],64))}}),qe=c({setup(u){const t=l=>{const{label:n,key:o}=l;return T(ie,{to:{path:`/admin/${o}`}},{default:()=>n})},e=[{label:"\u76EE\u6807\u5217\u8868",key:"targetList"},{label:"\u7528\u6237",key:"users"}];return(l,n)=>{const o=j("router-view");return d(),m(a(H),{"has-sider":"",style:{height:"100%"}},{default:i(()=>[s(a(le),{bordered:"","collapse-mode":"width","collapsed-width":64,width:140,"show-trigger":""},{default:i(()=>[s(a(re),{"render-label":t,options:e})]),_:1}),s(a(H),null,{default:i(()=>[s(o)]),_:1})]),_:1})}}});const Y=c({setup(u){return(t,e)=>(d(),m(a(z),{description:"404, \u627E\u4E0D\u5230\u9875\u9762",class:"target-empty",size:"huge"}))}}),Ue=c({setup(u){const t=p([]),e=async()=>{const n=await f.get(W);t.value=n.data};w(()=>{e()});const l=[{title:"ID",key:"id"},{title:"\u7528\u6237\u540D",key:"\u7528\u6237\u540D"},{title:"\u90AE\u7BB1",key:"\u90AE\u7BB1"}];return(n,o)=>(d(),m(a(V),{"row-key":r=>r.id,columns:l,data:t.value},null,8,["row-key","data"]))}}),Oe=[{path:"/",component:X,props:{isAdminMode:!1}},{path:"/admin",component:qe,children:[{path:"targetList",component:X,props:{isAdminMode:!0}},{path:"users",component:Ue},{path:":pathMatch(.*)*",component:Y}]},{path:"/:pathMatch(.*)*",component:Y}],b=p(!1),Te=()=>{b.value=!0},S=p(null),Ke=u=>{S.value=u},Ve=c({setup(u){const t=p(null),e=p({\u7528\u6237\u540D:"",\u5BC6\u7801:""}),l={\u7528\u6237\u540D:[{required:!0,validator:x,trigger:["input","blur"]}]};return w(()=>{Ke(t.value)}),(n,o)=>(d(),m(a(q),{ref:(r,_)=>{_.formRef=r,t.value=r},model:e.value,rules:l,onSubmit:o[2]||(o[2]=r=>a(ge)(e.value))},{default:i(()=>[s(a(A),{path:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D"},{default:i(()=>[s(a(D),{value:e.value.\u7528\u6237\u540D,"onUpdate:value":o[0]||(o[0]=r=>e.value.\u7528\u6237\u540D=r),"data-test-id":"\u7528\u6237\u540D",placeholder:"\u8BF7\u8F93\u5165",onKeydown:o[1]||(o[1]=E(k(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["model"]))}}),je=c({setup(u){const t=()=>new Promise((l,n)=>{S.value.validate(o=>{o?n():l(!0)})}),e=async()=>{await t(),await S.value.onSubmit()};return(l,n)=>(d(),m(a(O),{show:a(b),"onUpdate:show":n[0]||(n[0]=o=>U(b)?b.value=o:null),"mask-closable":!1,"show-icon":!1,preset:"dialog",title:"\u767B\u5F55","positive-text":"\u786E\u8BA4","negative-text":"\u7B97\u4E86","data-test-id":"\u767B\u5F55\u5F39\u7A97",onPositiveClick:e},{default:i(()=>[s(Ve)]),_:1},8,["show"]))}}),He={key:0},ze=B(" \u767B\u51FA "),Ge=c({setup(u){return(t,e)=>(d(),m(a(ce),null,{default:i(()=>[a(F).\u7528\u6237\u540D?(d(),v("span",He,[B(de(a(F).\u7528\u6237\u540D)+" ",1),s(a(y),{type:"primary","data-test-id":"\u767B\u51FA",text:"",onClick:a(we)},{default:i(()=>[ze]),_:1},8,["onClick"])])):K("",!0),s(je)]),_:1}))}});const Je={class:"target-header"},We=G("a",{href:"https://anyway.fm/",style:{"text-decoration":"none",color:"inherit"}}," Target ",-1),Qe=c({setup(u){return(t,e)=>(d(),v("div",Je,[s(a(pe),null,{title:i(()=>[We]),extra:i(()=>[s(Ge)]),_:1})]))}}),Xe=c({setup(u){return window.$message=_e(),(t,e)=>(d(),v("div"))}});const Ye=B(" \u767B\u5F55 "),Ze=c({setup(u){return(t,e)=>(d(),m(a(z),{description:"\u672A\u767B\u5F55",class:"not-login-empty"},{icon:i(()=>[s(a(fe),null,{default:i(()=>[s(a(me))]),_:1})]),extra:i(()=>[s(a(y),{size:"small","data-test-id":"\u767B\u5F55",onClick:a(Te)},{default:i(()=>[Ye]),_:1},8,["onClick"])]),_:1}))}});const eu={class:"target-content"},uu=c({setup(u){return(t,e)=>{const l=j("router-view");return d(),v(L,null,[s(Qe),G("div",eu,[a(F).\u7528\u6237\u540D?(d(),m(l,{key:0})):(d(),m(Ze,{key:1}))]),s(a(ve),null,{default:i(()=>[s(Xe)]),_:1})],64)}}}),tu=Be({history:Fe(),routes:Oe}),Z=ye(uu);Z.use(tu);f.interceptors.response.use(function(u){return u},function(u){return window.$message.error(`\u8BF7\u6C42\u9519\u8BEF: ${u.message}`),Promise.reject(u)});Z.mount("#app");
