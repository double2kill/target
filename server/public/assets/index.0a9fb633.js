var K=Object.defineProperty;var $=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var N=(e,u,t)=>u in e?K(e,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[u]=t,L=(e,u)=>{for(var t in u||(u={}))H.call(u,t)&&N(e,t,u[t]);if($)for(var t of $(u))z.call(u,t)&&N(e,t,u[t]);return e};import{r as m,a as f,d as _,o as A,b as p,c as B,w as i,e as s,u as a,N as b,f as C,g as D,h as k,i as G,j as J,k as W,l as v,m as y,n as Q,F as I,p as F,q as X,s as M,t as P,v as S,x as R,y as Y,z as Z,R as ee,A as te,B as ue,C as ae,D as oe,E as ne,G as se,H as re,I as ie,J as le}from"./vendor.464b6a9c.js";const de=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}};de();const q="api",w=`/${q}/targetList`,ce=`/${q}/userList`,T=m([]),g=async()=>{const e=await f.get(w);T.value=e.data},pe=async e=>{await f.post(w,e),await g()},_e=async e=>{await f.put(`${w}/${e.id}`,e),await g()},me=async e=>{await f.delete(`${w}/${e.id}`),await g()},h=m(!1),fe=()=>{E.value={\u76EE\u6807\u5185\u5BB9:"",\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4:"",\u7528\u6237\u540D:""},h.value=!0},ve=e=>{E.value=e,h.value=!0},x=m(null),Be=e=>{x.value=e},E=m({\u76EE\u6807\u5185\u5BB9:"",\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4:"",\u7528\u6237\u540D:""}),Fe=_({props:{initialFormData:{type:Object,required:!0}},setup(e){const u=m(null),t=m({\u76EE\u6807\u5185\u5BB9:"",\u7528\u6237\u540D:"",\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4:""}),r=(d,l)=>{const{field:c}=d;return l?!0:new Error(`${c}\u5FC5\u586B`)},o=d=>{if(d.id){_e(d);return}pe(d)};A(()=>{t.value=L({},E.value),Be(u.value)});const n={\u76EE\u6807\u5185\u5BB9:[{required:!0,validator:r,trigger:["input","blur"]}],\u7528\u6237\u540D:[{required:!0,validator:r,trigger:["input","blur"]}],\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4:[{required:!0,validator:r,trigger:["input","blur"]}]};return(d,l)=>(p(),B(a(G),{ref:(c,j)=>{j.formRef=c,u.value=c},model:t.value,rules:n,onSubmit:l[6]||(l[6]=c=>o(t.value))},{default:i(()=>[s(a(D),{path:"\u76EE\u6807\u5185\u5BB9",label:"\u76EE\u6807\u5185\u5BB9"},{default:i(()=>[s(a(b),{value:t.value.\u76EE\u6807\u5185\u5BB9,"onUpdate:value":l[0]||(l[0]=c=>t.value.\u76EE\u6807\u5185\u5BB9=c),"data-test-id":"\u76EE\u6807\u5185\u5BB9",placeholder:"\u8BF7\u8F93\u5165",onKeydown:l[1]||(l[1]=C(k(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),s(a(D),{path:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D"},{default:i(()=>[s(a(b),{value:t.value.\u7528\u6237\u540D,"onUpdate:value":l[2]||(l[2]=c=>t.value.\u7528\u6237\u540D=c),"data-test-id":"\u7528\u6237\u540D",placeholder:"\u8BF7\u8F93\u5165",onKeydown:l[3]||(l[3]=C(k(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),s(a(D),{path:"\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4",label:"\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4"},{default:i(()=>[s(a(b),{value:t.value.\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4,"onUpdate:value":l[4]||(l[4]=c=>t.value.\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4=c),"data-test-id":"\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4",placeholder:"\u8BF7\u8F93\u5165",onKeydown:l[5]||(l[5]=C(k(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["model"]))}}),he=_({setup(e){const u=()=>new Promise((r,o)=>{x.value.validate(n=>{n?o():r(!0)})}),t=async()=>{await u(),await x.value.onSubmit()};return(r,o)=>(p(),B(a(W),{show:a(h),"onUpdate:show":o[0]||(o[0]=n=>J(h)?h.value=n:null),"mask-closable":!1,"show-icon":!1,preset:"dialog",title:"\u6DFB\u52A0\u76EE\u6807","positive-text":"\u786E\u8BA4","negative-text":"\u7B97\u4E86",onPositiveClick:t},{default:i(()=>[s(Fe,{"initial-form-data":a(E)},null,8,["initial-form-data"])]),_:1},8,["show"]))}});const ye=F(" \u7F16\u8F91 "),we=F(" \u5220\u9664 "),ge=F(" \u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F "),Ee=_({props:{rowData:{type:Object,required:!0}},setup(e){return(u,t)=>(p(),v(I,null,[s(a(y),{class:"action-button","data-test-id":"\u7F16\u8F91",onClick:t[0]||(t[0]=r=>a(ve)(e.rowData))},{default:i(()=>[ye]),_:1}),s(a(Q),{"show-icon":!1,"negative-text":"\u7B97\u4E86","positive-text":"\u786E\u5B9A",onPositiveClick:t[1]||(t[1]=r=>a(me)(e.rowData))},{trigger:i(()=>[s(a(y),{class:"action-button",type:"error",size:"small","data-test-id":"\u5220\u9664"},{default:i(()=>[we]),_:1})]),default:i(()=>[ge]),_:1})],64))}});const Ae={key:0,class:"top-box"},be=F(" \u6DFB\u52A0 "),O=_({props:{isAdminMode:Boolean},setup(e){const u=e;A(()=>{g()});let t=[{title:"\u76EE\u6807\u5185\u5BB9",key:"\u76EE\u6807\u5185\u5BB9"},{title:"\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4",key:"\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4"},{title:"\u5B8C\u6210\u65F6\u95F4",key:"\u5B8C\u6210\u65F6\u95F4"},{title:"\u7528\u6237\u540D",key:"\u7528\u6237\u540D"}];return u.isAdminMode&&t.push({title:"\u64CD\u4F5C",key:"\u64CD\u4F5C",render(r){return P(Ee,{rowData:r})}}),(r,o)=>(p(),v("div",null,[e.isAdminMode?(p(),v("div",Ae,[s(a(y),{"data-test-id":"\u6DFB\u52A0",onClick:a(fe)},{default:i(()=>[be]),_:1},8,["onClick"]),s(he)])):X("",!0),s(a(M),{"data-test-id":"\u8868\u683C","row-key":n=>n.id,columns:a(t),data:a(T)},null,8,["row-key","columns","data"])]))}}),Ce=_({setup(e){const u=r=>{const{label:o,key:n}=r;return P(ee,{to:{path:`/admin/${n}`}},{default:()=>o})},t=[{label:"\u76EE\u6807\u5217\u8868",key:"targetList"},{label:"\u7528\u6237",key:"users"}];return(r,o)=>{const n=S("router-view");return p(),B(a(R),{"has-sider":"",position:"absolute",style:{top:"65px"}},{default:i(()=>[s(a(Z),{bordered:"","collapse-mode":"width","collapsed-width":64,width:140,"show-trigger":""},{default:i(()=>[s(a(Y),{"render-label":u,options:t})]),_:1}),s(a(R),null,{default:i(()=>[s(n)]),_:1})]),_:1})}}});const U=_({setup(e){return(u,t)=>(p(),B(a(te),{description:"404, \u627E\u4E0D\u5230\u9875\u9762",class:"target-empty",size:"huge"}))}}),De=_({setup(e){const u=m([]),t=async()=>{const o=await f.get(ce);u.value=o.data};A(()=>{t()});const r=[{title:"ID",key:"id"},{title:"\u7528\u6237\u540D",key:"\u7528\u6237\u540D"},{title:"\u90AE\u7BB1",key:"\u90AE\u7BB1"}];return(o,n)=>(p(),B(a(M),{"row-key":d=>d.id,columns:r,data:u.value},null,8,["row-key","data"]))}}),ke=[{path:"/",component:O,props:{isAdminMode:!1}},{path:"/admin",component:Ce,children:[{path:"targetList",component:O,props:{isAdminMode:!0}},{path:"users",component:De},{path:":pathMatch(.*)*",component:U}]},{path:"/:pathMatch(.*)*",component:U}];const xe={class:"target-header"},$e=oe("a",{href:"https://anyway.fm/",style:{"text-decoration":"none",color:"inherit"}}," Target ",-1),Ne=F("\u767B\u5F55"),Le=_({setup(e){return(u,t)=>(p(),v("div",xe,[s(a(ae),null,{title:i(()=>[$e]),extra:i(()=>[s(a(ue),null,{default:i(()=>[s(a(y),null,{default:i(()=>[Ne]),_:1})]),_:1})]),_:1})]))}}),Ie=_({setup(e){return window.$message=ne(),(u,t)=>(p(),v("div"))}}),Me=_({setup(e){return(u,t)=>{const r=S("router-view");return p(),v(I,null,[s(Le),s(r),s(a(se),null,{default:i(()=>[s(Ie)]),_:1})],64)}}}),Pe=re({history:ie(),routes:ke}),V=le(Me);V.use(Pe);f.interceptors.response.use(function(e){return e},function(e){return window.$message.error(`\u8BF7\u6C42\u9519\u8BEF: ${e.message}`),Promise.reject(e)});V.mount("#app");
